{% extends 'base.html' %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="br-card">
                <div class="card-header">
                    <h2 class="card-title">Histórico de Proventos</h2>
                </div>
                <div class="card-content">
                    <div class="br-tabs">
                        <nav class="tab-nav">
                            <ul>
                                <li class="tab-item">
                                    <button type="button" data-target="#tab-todos">Todos</button>
                                </li>
                                <li class="tab-item">
                                    <button type="button" data-target="#tab-acoes">Ações</button>
                                </li>
                                <li class="tab-item">
                                    <button type="button" data-target="#tab-fiis">FIIs</button>
                                </li>
                            </ul>
                        </nav>
                        
                        <div class="tab-content">
                            <div class="tab-panel active" id="tab-todos">
                                <table class="br-table">
                                    <thead>
                                        <tr>
                                            <th>Data Com</th>
                                            <th>Ativo</th>
                                            <th>Tipo</th>
                                            <th>Valor</th>
                                            <th>Data Pagamento</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for provento in proventos %}
                                        <tr>
                                            <td>{{ provento.data_com|date:"d/m/Y" }}</td>
                                            <td>{{ provento.papel }}</td>
                                            <td>{{ provento.tipo_provento }}</td>
                                            <td>R$ {{ provento.valor|floatformat:2 }}</td>
                                            <td>{{ provento.data_pagamento|date:"d/m/Y"|default:"-" }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.tab-item button');
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const target = this.dataset.target;
                document.querySelectorAll('.tab-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                document.querySelector(target).classList.add('active');
            });
        });
    });
</script>
{% endblock %}
